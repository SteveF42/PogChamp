(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),s=n(14),o=n.n(s),i=(n(89),n(154)),u=n(155),l=n(34),d=n(9),j=n(61),p=n(60),b=n(78),f=n(152),h=n(168),O=n(5),m=n(153),x=function(e){var t=e.menuItems,n=e.label,s=e.startPlaybackOnDevice,o=Object(r.useState)(null),i=Object(d.a)(o,2),u=i[0],l=i[1],j=c.a.createRef(),p=function(e){l(null),s(e)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(g,{"aria-controls":"fade-menu","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},children:n}),Object(a.jsx)(b.a,{id:"fade-menu",anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:p,TransitionComponent:f.a,ref:j,children:void 0!==t&&t.map((function(e){return Object(a.jsx)(h.a,{id:e.id,onClick:p,children:e.name},e.id)}))})]})},g=Object(O.a)({root:{backgroundColor:j.a[400],"&:hover":{backgroundColor:j.a[500]}}})(m.a),v=Object(O.a)({root:{backgroundColor:p.a[400],"&:hover":{backgroundColor:p.a[500]}}})(m.a),y=function(){return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("div",{className:"header-home",children:[Object(a.jsx)("span",{children:"logo"}),Object(a.jsx)("h1",{style:{fontSize:"3rem",fontWeight:"400"},children:"POGCHAMP!!"})]}),Object(a.jsx)("p",{className:"details",children:"Select a room to join or host your own! 'requires spotify premium' "}),Object(a.jsxs)("div",{className:"button-select",children:[Object(a.jsx)("div",{className:"btn-group",children:Object(a.jsx)(l.b,{to:"/join",children:Object(a.jsx)(g,{startIcon:Object(a.jsx)(i.a,{style:{fontSize:"40px"}}),variant:"contained",color:"primary",style:{borderRadius:"30px",fontSize:"15px",fontWeight:"700"},size:"large",children:"Join"})})}),Object(a.jsx)("div",{className:"btn-group",children:Object(a.jsx)(l.b,{to:"/host",children:Object(a.jsx)(v,{startIcon:Object(a.jsx)(u.a,{style:{fontSize:"35px"}}),variant:"contained",color:"secondary",style:{borderRadius:"30px",fontSize:"15px",fontWeight:"700"},size:"large",children:"Host Room"})})})]})]})},w=n(6),S=n.n(w),k=n(11),C=n(165),N=n(166),P=n(169),I=(n(96),Object(O.a)({root:{"& input:valid + fieldset":{borderColor:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:j.a[400]},"&.Mui-focused fieldset":{borderColor:j.a[400]}},"& .MuiFormLabel-root":{color:"grey"},"& .MuiInputBase-root":{color:"white"},"& .MuiFormLabel-root.Mui-focused":{color:j.a[400]}}})(C.a)),T=Object(O.a)({root:{color:j.a[400]}})(N.a),M=function(){var e=Object(r.useState)(null),t=Object(d.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),o=Object(d.a)(s,2),i=o[0],u=o[1],l=Object(r.useState)(!1),j=Object(d.a)(l,2),p=j[0],b=j[1],f=Object(r.useState)(!1),h=Object(d.a)(f,2),O=h[0],m=h[1],x=Object(r.useState)(1),y=Object(d.a)(x,2),w=y[0],C=y[1];Object(r.useEffect)((function(){(function(){var e=Object(k.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/createRoom",{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n.room);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var N=function(){var e=Object(k.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/spotify/getAuthUrl",{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,window.location.assign(n.url);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(k.a)(S.a.mark((function e(){var t,a,r,c,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/spotify/isAuthenticated",{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,console.log(a),a.authenticated){e.next=11;break}N(),e.next=21;break;case 11:return r={votesToSkip:w,usersCanQueue:i,usersCanPlayPause:O,usersCanSkip:p,override:null!=n},e.next=14,fetch("/api/createRoom",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 14:return c=e.sent,e.next=17,c.json();case 17:s=e.sent,console.log(s.Room),window.localStorage.setItem("code",s.Room.code),window.location.href="/room/".concat(s.Room.code);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(k.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/spotify/isAuthenticated",{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:e.sent.authenticated?(window.localStorage.setItem("code",n.code),window.location="/room/".concat(n.code)):N();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("div",{className:"select-options",children:[Object(a.jsx)("div",{className:"rejoin-room",children:null!=n&&Object(a.jsxs)(v,{variant:"contained",color:"secondary",size:"large",onClick:A,children:["Re-Join: ",n.code]})}),Object(a.jsx)(g,{variant:"contained",color:"primary",size:"large",onClick:M,children:" Create New Room "}),Object(a.jsxs)("div",{className:"create-new-room",children:[Object(a.jsx)(I,{onChange:function(e){return C(e.target.value)},variant:"outlined",defaultValue:w,required:!0,type:"number",label:"Vote required to skip",inputProps:{style:{textAlign:"center"}}}),Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"options",children:[Object(a.jsx)(P.a,{control:Object(a.jsx)(T,{color:"default",onClick:function(){return u(!i)}}),label:"Allow users to queue music"}),Object(a.jsx)(P.a,{control:Object(a.jsx)(T,{color:"default",onClick:function(){return b(!p)}}),label:"Allow users to skip songs"}),Object(a.jsx)(P.a,{control:Object(a.jsx)(T,{color:"default",onClick:function(){return m(!O)}}),label:"Allow users to Play/Pause music"})]})})]})]})})},A=n(156),R=(n(97),Object(O.a)({root:{"& input:valid + fieldset":{borderColor:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:j.a[400]},"&.Mui-focused fieldset":{borderColor:j.a[400]}},"& .MuiFormLabel-root":{color:"grey"},"& .MuiInputBase-root":{color:"white"},"& .MuiFormLabel-root.Mui-focused":{color:j.a[400]}}})(C.a)),L=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),o=Object(d.a)(s,2),i=o[0],u=o[1],l=Object(r.useState)(""),j=Object(d.a)(l,2),p=j[0],b=j[1],f=function(){var e=Object(k.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(p),e.next=3,fetch("/api/getRoom/".concat(p));case 3:404===(n=e.sent).status&&(c(!0),u("invalid room code"),t.target.value=""),200===n.status&&(window.localStorage.setItem("code",p),window.location="/room/".concat(p));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"container join-container",children:[Object(a.jsx)(R,{error:n,variant:"outlined",label:"Input Room Code",value:p,onChange:function(e){return b(e.target.value.toUpperCase())}}),Object(a.jsx)(A.a,{error:n,children:i}),Object(a.jsx)("div",{className:"bottom",children:Object(a.jsx)(g,{onClick:f,size:"large",className:"btn",children:"JOIN"})})]})},H={header:{width:"100%",display:"flex",justifyContent:"flex-start",alignItems:"center",textDecoration:"none",color:"white"},span:{paddingRight:"15px",paddingLeft:"100px"},a:{textDecoration:"none",color:"white",fontSize:"35px"}},J=function(){return Object(a.jsxs)("div",{style:H.header,href:"/",children:[Object(a.jsx)("span",{style:H.span,children:Object(a.jsx)(l.b,{to:"/",style:H.a,children:"Logo"})}),Object(a.jsxs)("h2",{children:[" ",Object(a.jsx)(l.b,{to:"/",style:H.a,children:"POGCHAMP"})]})]})},_=(n(98),function(){return Object(a.jsxs)("footer",{className:"layout-footer",children:[Object(a.jsxs)("div",{className:"footer-info",children:[Object(a.jsx)("a",{href:"/",children:" Terms of use "}),Object(a.jsx)("a",{href:"/",children:" Privacy Policy "}),Object(a.jsx)("a",{href:"https://github.com/SteveF42/PogChamp",children:" GitHub "})]}),Object(a.jsx)("span",{children:Object(a.jsx)("p",{children:"Spotify is copyright Spotify AB and is not affiliated with PogChamp"})})]})}),B=n(39),Q=n(46),F=n(167),U=n(164),z=n(67),q=n(27),D=n(160),V=n(157),E=n(158),W=n(159),G=function(e){var t=e.currentSong,n=e.playSong,c=e.pauseSong,s=e.skipSong,o=e.roomInfo,i=Object(r.useState)(void 0!==t&&t.is_playing),u=Object(d.a)(i,2),l=u[0],j=u[1],p=Object(r.useState)(!1),b=Object(d.a)(p,2),f=b[0],h=b[1],O=function(){var e=Object(k.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l?c():n(),j(!l);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x={playPause:{color:o.usersCanPlayPause||o.isHost?"white":"grey"},skip:{color:o.usersCanSkip||o.isHost?"white":"grey"}};return Object(a.jsx)(a.Fragment,{children:void 0!==t&&Object(a.jsxs)("div",{className:"musicPlayer",children:[Object(a.jsx)("div",{className:"leftHalf",children:Object(a.jsx)("img",{src:t.item.album.images[1].url,height:"200",width:"200",alt:"none",placeholder:"img"})}),Object(a.jsxs)("div",{className:"rightHalf",children:[Object(a.jsxs)("div",{className:"songInfo",children:[Object(a.jsx)("h3",{className:"songTitle",children:t.item.name}),Object(a.jsx)("div",{className:"songArtists",children:t.item.artists.map((function(e){return Object(a.jsx)("p",{className:"artists",children:e.name},e.id)}))})]}),Object(a.jsxs)("div",{className:"audioController",children:[Object(a.jsxs)("div",{className:"trackButtons",children:[Object(a.jsx)("div",{className:"pauseOrPlay",children:Object(a.jsx)(m.a,{disabled:!(o.usersCanPlayPause||o.isHost),onClick:O,startIcon:l?Object(a.jsx)(V.a,{style:x.playPause}):Object(a.jsx)(E.a,{style:x.playPause})})}),Object(a.jsxs)("div",{className:"skip",children:[Object(a.jsx)("p",{}),Object(a.jsxs)(m.a,{style:{color:"white"},disabled:!(o.usersCanSkip||o.isHost),startIcon:Object(a.jsx)(W.a,{style:x.skip}),onClick:function(){s(window.localStorage.getItem("code"),f),j(!0),h(!f)},children:[o.currentVotes," / ",o.votesToSkip]})]})]}),Object(a.jsx)("div",{className:"trackProgress",children:Object(a.jsx)(D.a,{variant:"determinate",value:t.progress_ms/t.item.duration_ms*100})})]})]})]})})},K=Object(O.a)({root:{"& input:valid + fieldset":{borderColor:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:j.a[400]},"&.Mui-focused fieldset":{borderColor:j.a[400]}},"& .MuiFormLabel-root":{color:"white"},"& .MuiInputBase-root":{color:"white"},"& .MuiFormLabel-root.Mui-focused":{color:j.a[400]}}})(C.a),X=Object(O.a)({root:{color:j.a[400]}})(N.a),Y=function(e){var t=e.usersCanSkip,n=e.usersCanQueue,c=e.usersCanPlayPause,s=e.hidePopUp,o=e.votesToSkip,i=e.props,u=Object(r.useState)(c),l=Object(d.a)(u,2),j=l[0],p=l[1],b=Object(r.useState)(n),f=Object(d.a)(b,2),h=f[0],O=f[1],m=Object(r.useState)(t),x=Object(d.a)(m,2),v=x[0],y=x[1],w=Object(r.useState)(o),C=Object(d.a)(w,2),N=C[0],I=C[1],T=function(){var e=Object(k.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/updateRoom",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usersCanPlayPause:j,usersCanQueue:h,usersCanSkip:v,votesToSkip:N,updatePermissions:!0})});case 2:s(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"popUp",onClick:s,style:i,children:Object(a.jsxs)("div",{className:"popUpContent",children:[Object(a.jsx)(K,{onChange:function(e){return I(e.target.value)},variant:"outlined",defaultValue:N,required:!0,type:"number",label:"Vote required to skip",inputProps:{style:{textAlign:"center"}}}),Object(a.jsx)(P.a,{control:Object(a.jsx)(X,{color:"default",checked:j,onChange:function(){return p(!j)}}),label:"Allow users to play/pause"}),Object(a.jsx)(P.a,{control:Object(a.jsx)(X,{color:"default",checked:v,onChange:function(){return y(!v)}}),label:"Allow users to skip"}),Object(a.jsx)(P.a,{control:Object(a.jsx)(X,{color:"default",checked:h,onChange:function(){return O(!h)}}),label:"Allow users to queue music"}),Object(a.jsx)("div",{className:"updateRoomButton",children:Object(a.jsx)(g,{className:"roomUpdate",onClick:T,children:"Update Room"})})]})})},Z=n(31),$=n(162),ee=n(161),te=function(){var e=Object(k.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("pause"),e.next=3,fetch("/spotify/pause",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t})});case 3:200!==(n=e.sent).status&&console.log(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(k.a)(S.a.mark((function e(t){var n,a,r=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{context_uri:"",offset:0},console.log("play"),e.next=4,fetch("/spotify/play",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t,context_uri:n.context_uri,offset:{position:n.offset}})});case 4:200!==(a=e.sent).status&&console.log(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(k.a)(S.a.mark((function e(t){var n,a,r=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],console.log("skip"),e.next=4,fetch("/spotify/skip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t,voted:n})});case 4:200!==(a=e.sent).status&&console.log(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e){var t=e.bandaid,n=void 0!==t&&t,r=e.imgSrc,c=e.artists,s=e.songName,o=e.songLength,i=e.dimensions,u=e.context_uri,l=e.trackNumber,d=e.spotifyTrack,j=e.displayButtons,p=function(){var e=Object(k.a)(S.a.mark((function e(){var t,n,a,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/spotify/addToQueue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uri:d,code:window.localStorage.getItem("code")})});case 2:t=[],n=Object(B.a)(c);try{for(n.s();!(a=n.n()).done;)i=a.value,t.push(i.name)}catch(j){n.e(j)}finally{n.f()}return e.next=7,fetch("/api/updateRoom",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({queueSong:!0,imgSrc:r,artists:t,songName:s,songLength:o,context_uri:u,trackNumber:l,spotifyTrack:d,code:window.localStorage.getItem("code")})});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"song",children:[Object(a.jsxs)("div",{className:"song_leftSide",children:[j&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{onClick:function(){var e={context_uri:u,offset:l-1};ne(window.localStorage.getItem("code"),e)},startIcon:Object(a.jsx)(E.a,{})}),Object(a.jsx)(m.a,{onClick:p,startIcon:Object(a.jsx)(ee.a,{})})]}),Object(a.jsx)("img",Object(Q.a)(Object(Q.a)({src:r},i),{},{alt:"noThumbnail.jpg"}))]}),Object(a.jsxs)("div",{className:"songDetails",children:[Object(a.jsxs)("div",{className:"artists",children:[Object(a.jsx)("p",{children:"artists:"}),c.map((function(e){return Object(a.jsx)("div",{style:{width:"100%",textAlign:"center"},children:n?Object(a.jsx)("p",{children:e}):Object(a.jsx)("p",{children:e.name})},n?e:e.name)}))]}),Object(a.jsxs)("div",{className:"songName",children:[Object(a.jsx)("p",{children:"Song:"}),Object(a.jsx)("p",{children:s})]}),Object(a.jsxs)("div",{className:"songLength",children:[Object(a.jsx)("p",{children:"Duration:"}),Object(a.jsx)("p",{children:(o/1e3/60).toFixed(2)})]})]})]})},ce=function(e){var t=e.searchItems,n=e.changeSearchView,r=e.setQuaryParams,c=e.searchSong,s=Object(q.c)(t,(function(e){return e.id}),{from:{transform:"translate3d(0,120px,0) scale(0)",opacity:0},enter:function(e){return function(){var e=Object(k.a)(S.a.mark((function e(t,n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({transform:"translate3d(0,0,0) scale(1)",opacity:1});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},leave:{display:"none"},trail:125});return Object(a.jsxs)("div",{className:"searchSong",children:[Object(a.jsxs)("div",{className:"searchInput",children:[Object(a.jsx)(m.a,{onClick:n,startIcon:Object(a.jsx)($.a,{}),children:"back"}),Object(a.jsx)(C.a,{label:"Search",onChange:r}),Object(a.jsx)(g,{onClick:c,children:"Submit"})]}),Object(a.jsx)("div",{className:"searchItems",children:s.map((function(e){var t=e.item,n=e.key,r=e.props;return Object(a.jsx)(q.a.div,{style:r,children:Object(a.jsx)(re,{artists:t.artists,songName:t.name,imgSrc:t.album.images[2].url,songLength:t.duration_ms,dimensions:{height:64,width:64},context_uri:t.album.uri,trackNumber:t.track_number,spotifyTrack:t.uri,displayButtons:!0},t.id)},n)}))})]})},se=n(163),oe=function(e){var t=e.changeSearchView,n=e.songQueue,c=Object(r.useState)(!1),s=Object(d.a)(c,2),o=s[0],i=(s[1],Object(q.c)(n,(function(e){return e._id}),{from:{transform:"translate3d(0,120px,0) scale(0)",opacity:0},enter:function(e){return function(){var e=Object(k.a)(S.a.mark((function e(t,n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({transform:"translate3d(0,0,0) scale(1)",opacity:1});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},leave:function(e){return function(){var e=Object(k.a)(S.a.mark((function e(t,n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({transform:"translate3d(0,-25px,0) scale(1)",opacity:0,position:"absolute"});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},trail:75}));Object(q.b)({from:{transform:"translate3d(0,0,0)"},to:{transform:o?"translate3d(0,-64,0)":""}});return Object(a.jsxs)("div",{className:"songQueue",children:[Object(a.jsx)(m.a,{onClick:t,style:{color:"white"},startIcon:Object(a.jsx)(se.a,{}),children:"Add Song"}),i.map((function(e){var t=e.item,n=e.key,r=e.props;return Object(a.jsx)(q.a.div,{style:r,children:Object(a.jsx)(re,{bandaid:!0,artists:t.artists,songName:t.songName,imgSrc:t.imgSrc,songLength:t.songLength,dimensions:{height:64,width:64},context_uri:t.context_uri,trackNumber:t.trackNumber,displayButtons:!1},t._id)},n)})),n.length<=0&&Object(a.jsx)("p",{children:"No songs in queue"})]})},ie=function(e){var t=e.Queue,n=e.code,c=Object(r.useState)(void 0===t?[]:Object(Z.a)(t)),s=Object(d.a)(c,2),o=s[0],i=s[1],u=Object(r.useState)(JSON.parse(window.localStorage.getItem("songSearch"))||[]),l=Object(d.a)(u,2),j=l[0],p=l[1],b=Object(r.useState)(""),f=Object(d.a)(b,2),h=f[0],O=f[1],m=Object(r.useState)(!0),x=Object(d.a)(m,2),g=x[0],v=x[1];Object(r.useEffect)((function(){void 0!==t&&i(Object(Z.a)(t))}),[t]);var y=function(){var e=Object(k.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(h),e.next=3,fetch("/spotify/searchSpotify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:h,code:n,type:"track"})});case 3:return t=e.sent,e.next=6,t.json();case 6:void 0!==(a=e.sent).tracks&&(p(Object(Z.a)(a.tracks.items)),window.localStorage.setItem("songSearch",[JSON.stringify(a.tracks.items)]));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){v(!g)};return Object(a.jsx)(a.Fragment,{children:g?Object(a.jsx)(oe,{changeSearchView:w,songQueue:o}):Object(a.jsx)(ce,{searchItems:j,changeSearchView:w,setQuaryParams:function(e){O(e.target.value)},searchSong:y})})},ue=(n(99),function(){var e=window.localStorage.getItem("code")||window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1),t=Object(r.useState)(),n=Object(d.a)(t,2),c=n[0],s=n[1],o=Object(r.useState)(!1),i=Object(d.a)(o,2),u=i[0],l=i[1],j=Object(r.useState)(),p=Object(d.a)(j,2),b=p[0],f=p[1],h=Object(r.useState)(!1),O=Object(d.a)(h,2),m=O[0],g=O[1],y=Object(r.useState)({isHost:!1}),w=Object(d.a)(y,2),C=w[0],N=w[1],I=Object(r.useState)(0),T=Object(d.a)(I,2),M=T[0],A=T[1],R=Object(r.useState)(0),L=Object(d.a)(R,2),H=L[0],J=L[1],_=Object(F.a)(),D=Object(d.a)(_,2),V=D[0],E=D[1],W=Object(F.a)(),K=Object(d.a)(W,2),X=K[0],Z=K[1],$=Object(q.b)({to:{height:m?M:H}});Object(r.useEffect)((function(){window.localStorage.setItem("code",e),ce(),re().then((function(e){e.isHost?ee():s({isHost:!1})}));var t=setInterval((function(){ce(),re()}),2500);return function(){clearInterval(t),fetch("/api/clearQueue",{method:"PUT"})}}),[]),Object(r.useEffect)((function(){A(E.height),J(Z.height)}),[E,Z]);var ee=function(){var e=Object(k.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/spotify/getAvailableDevices");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,200===t.status&&s(Object(Q.a)(Object(Q.a)({},n),{},{isHost:!0}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var t=Object(k.a)(S.a.mark((function t(){var n,a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/getRoom/".concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:if(a=t.sent,200!==n.status){t.next=9;break}return N(a.roomInfo),t.abrupt("return",a.roomInfo);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ce=function(){var t=Object(k.a)(S.a.mark((function t(){var n,a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/spotify/currentlyPlaying",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})});case 2:if(200===(n=t.sent).status){t.next=8;break}return console.log("No Current song playing"),t.abrupt("return");case 8:if(401!==n.status){t.next=11;break}return console.log("access denied"),t.abrupt("return");case 11:return t.next=13,n.json();case 13:a=t.sent,void 0!==b&&b.item===a.song.item||null!==a.song&&null!=a.song.item&&f(a.song);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),se=function(){var t=Object(k.a)(S.a.mark((function t(n){var a,r,c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(a=n.target.id)){t.next=3;break}return t.abrupt("return");case 3:return r={deviceID:a},console.log(r),t.next=7,fetch("/spotify/playNewDevice",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 7:c=t.sent,console.log(c),null!=b&&!1!==b.is_playing||(ne(e),ce());case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),oe=function(e){var t=e.target.className;"popUp"!==t&&"MuiButton-label"!==t||l(!u)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(z.Transition,{keys:u,items:u,from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:{duration:200},children:function(e){return e&&function(e){return Object(a.jsx)(Y,{props:e,hidePopUp:oe,usersCanPlayPause:C.usersCanPlayPause,usersCanQueue:C.usersCanQueue,usersCanSkip:C.usersCanSkip,votesToSkip:C.votesToSkip})}}}),Object(a.jsxs)("div",{className:"roomContainer",children:[Object(a.jsxs)("div",{className:"topHalf",children:[Object(a.jsxs)("div",{className:"topItems",children:[Object(a.jsx)("span",{className:"roomCode",children:Object(a.jsxs)("h3",{style:{fontSize:"1.58rem"},children:["Code: ",window.localStorage.getItem("code")]})}),Object(a.jsx)("div",{className:"queueSwitch",children:Object(a.jsx)(P.a,{labelPlacement:"top",control:Object(a.jsx)(U.a,{size:"medium",value:m,onChange:function(){g(!m),function(){var e,t=document.getElementsByClassName("attachAnimation"),n=Object(B.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.classList.remove("playAnimation"),a.offsetWidth,a.classList.add("playAnimation")}}catch(r){n.e(r)}finally{n.f()}}()}}),label:Object(a.jsxs)("p",{className:"playAnimation",style:{margin:"0"},children:[" ",m?"Queue":"Music"]})})})]}),Object(a.jsx)(q.a.div,{className:"musicContainer",style:$,children:Object(a.jsx)(z.Transition,{items:m,from:{opacity:0},enter:{opacity:1},leave:{display:"none"},delay:200,config:{duration:700},children:function(t){return t?function(t){return Object(a.jsx)("div",{style:t,ref:V,children:Object(a.jsx)(ie,{Queue:C.songQueue,code:e})})}:function(t){return Object(a.jsxs)("div",{style:t,ref:X,children:[Object(a.jsx)(G,{roomInfo:C,currentSong:b,pauseSong:function(){return te(e)},playSong:function(){return ne(e)},skipSong:ae}),Object(a.jsxs)("div",{className:"bottomButtons",children:[void 0!==c&&C.isHost&&Object(a.jsx)("div",{className:"availableDevices",children:Object(a.jsx)(x,{menuItems:c.devices,label:"Listening Device",startPlaybackOnDevice:se})}),C.isHost&&Object(a.jsx)("div",{className:"roomSettings",children:Object(a.jsx)(v,{style:{marginLeft:"10px"},onClick:function(){return l(!u)},children:"Room Settings"})})]})]})}}})})]}),Object(a.jsx)("div",{className:"bottomHalf"})]})]})}),le=function(){return Object(r.useEffect)((function(){(function(){var e=Object(k.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=new URLSearchParams(window.location.search)).has("code")){e.next=8;break}return e.next=4,fetch("/spotify/callback",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t.get("code")})});case 4:200===e.sent.status&&(window.history.replaceState(null,null,"/host"),window.location="/host"),e.next=9;break;case 8:t.has("error")&&window.history.go(-2);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),null},de=n(16);n(115);var je=function(){return Object(a.jsx)("div",{className:"App main-container",children:Object(a.jsxs)(l.a,{children:[Object(a.jsx)(J,{}),Object(a.jsxs)(de.c,{children:[Object(a.jsx)(de.a,{path:"/",exact:!0,component:y}),Object(a.jsx)(de.a,{path:"/join",exact:!0,component:L}),Object(a.jsx)(de.a,{path:"/host",component:M}),Object(a.jsx)(de.a,{path:"/authCallback",component:le}),Object(a.jsx)(de.a,{path:"/room/:id",component:ue}),Object(a.jsx)(de.a,{path:"/",render:function(){return Object(a.jsx)("p",{children:"Not Found 404"})}})]}),Object(a.jsx)(_,{})]})})};n(116);o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(je,{style:{height:"100%"}})}),document.getElementById("root"))},89:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.2dd5499f.chunk.js.map